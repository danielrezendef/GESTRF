@model IEnumerable<GESTRF.Models.Chamado>
@{
    ViewData["Title"] = "Cahamdo";
    ViewData["TitlePage"] = "Chamado";
}
<form asp-action="Index" method="get">
    <!-- /.card-header -->
    <div class="card-body">
        <table id="Table1" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Assunto</th>
                    <th>Setor</th>
                    <th>T&eacutecnico</th>
                    <th>Data</th>
                    <th>Ultima Altera&ccedil&atildeo</th>
                    <th>Status</th>
                    <th>Ajustes</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Assunto)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Setor)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Tecnico)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.DataCri)
                        </td>
                        <td>
                            @{
                                if (item.Alteracao != "Aberto")
                                    @Html.DisplayFor(modelItem => item.Alteracao)

                                string result = string.Empty;
                                TimeSpan op = DateTime.Now - item.DataCri;

                                if ((int)op.TotalDays > 0)
                                    result += string.Format($"{(int)op.TotalDays} Dias ");

                                if ((int)op.TotalHours > 0 && (int)op.TotalHours < 24 && (int)op.TotalDays == 0)
                                    result += string.Format($"{(int)op.TotalHours} Horas ");

                                if ((int)op.TotalMinutes > 0 && (int)op.TotalMinutes < 60 && (int)op.TotalDays == 0)
                                    result += string.Format($"{(int)op.TotalMinutes} Minutos");

                                @Html.DisplayFor(modelItem => result)
                            }
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status)
                        </td>
                        <td>
                            @*<a asp-action="Edit" asp-route-id="@item.ChamadoId"*@ <button type="button" class="btn btn-default btn-sm" data-container="body" title="Editar">
                                <i class="fas fa-edit"></i>
                            </button>
                            <a asp-action="Details" asp-route-id="@item.ChamadoId" button type="button" class="btn btn-default btn-sm" data-container="body" title="Detalhar">
                                <i class="fas fa-info"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        
        <!-- /.card -->
    </div>
    <div class="col-md-1">
        <a asp-action="Create" type="button" title="Inserir Chamado" class="btn btn-block btn-success">
            <i class="fas fa-file-circle-plus"></i>
        </a>
    </div>
</form>